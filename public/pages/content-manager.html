<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5.0,user-scalable=yes">
<title>Meauxbility Content Manager</title>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HZEWHZG1WP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-HZEWHZG1WP', {
    custom_map: {
      'custom_parameter_1': 'user_type',
      'custom_parameter_2': 'community_impact',
      'custom_parameter_3': 'session_id'
    }
  });
</script>

<!-- Meauxbility Analytics -->
<script src="js/analytics.js"></script>
<script src="js/events.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,system-ui,sans-serif;background:linear-gradient(135deg,#051b1e 0%,#0a2427 50%,#1a4a52 100%);min-height:100vh;color:#f0f9fa;overflow-x:hidden}

/* Header */
.header{padding:2rem;text-align:center;position:relative;z-index:10}
.logo{width:60px;height:60px;background:linear-gradient(135deg,#FF6B35,#E85D00);border-radius:12px;margin:0 auto 1rem;display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:bold;color:#fff;box-shadow:0 10px 30px rgba(255,107,53,0.3)}
.title{font-size:2.5rem;font-weight:900;margin-bottom:0.5rem;background:linear-gradient(135deg,#4ABAB8,#339999);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.subtitle{color:rgba(240,249,250,0.7);font-size:1.125rem}

/* Main Container */
.main-container{display:grid;grid-template-columns:300px 1fr;gap:2rem;padding:2rem;min-height:calc(100vh - 200px)}

/* Sidebar */
.sidebar{background:rgba(26,74,82,0.4);backdrop-filter:blur(20px);border:1px solid rgba(74,171,184,0.2);border-radius:20px;padding:2rem;height:fit-content;position:sticky;top:2rem}

.sidebar-section{margin-bottom:2rem}
.sidebar-title{font-size:1.25rem;font-weight:700;margin-bottom:1rem;color:#4ABAB8}
.sidebar-item{padding:0.75rem;background:rgba(51,153,153,0.1);border:1px solid rgba(51,153,153,0.2);border-radius:12px;margin-bottom:0.5rem;cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:0.75rem}
.sidebar-item:hover{background:rgba(51,153,153,0.3);border-color:#339999;transform:translateX(5px)}
.sidebar-item.active{background:rgba(51,153,153,0.4);border-color:#339999;box-shadow:0 5px 15px rgba(51,153,153,0.2)}

/* Content Area */
.content-area{background:rgba(26,74,82,0.4);backdrop-filter:blur(20px);border:1px solid rgba(74,171,184,0.2);border-radius:20px;padding:2rem;overflow:hidden}

/* Upload Zone */
.upload-zone{border:2px dashed rgba(74,171,184,0.5);border-radius:16px;padding:3rem;text-align:center;margin-bottom:2rem;transition:all 0.3s;cursor:pointer}
.upload-zone:hover{border-color:#4ABAB8;background:rgba(74,171,184,0.05)}
.upload-zone.dragover{border-color:#339999;background:rgba(51,153,153,0.1);transform:scale(1.02)}
.upload-icon{font-size:3rem;margin-bottom:1rem;color:#4ABAB8}
.upload-text{font-size:1.25rem;font-weight:600;margin-bottom:0.5rem;color:#f0f9fa}
.upload-subtext{color:rgba(240,249,250,0.6);font-size:0.875rem}

/* Asset Grid */
.asset-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem;margin-bottom:2rem}

.asset-card{background:rgba(26,74,82,0.6);backdrop-filter:blur(20px);border:1px solid rgba(74,171,184,0.2);border-radius:16px;padding:1.5rem;transition:all 0.3s;position:relative;overflow:hidden}
.asset-card:hover{transform:translateY(-5px);border-color:rgba(255,107,53,0.5);box-shadow:0 10px 30px rgba(255,107,53,0.1)}

.asset-preview{width:100%;height:150px;background:rgba(51,153,153,0.1);border-radius:12px;margin-bottom:1rem;display:flex;align-items:center;justify-content:center;font-size:2rem;color:#4ABAB8;overflow:hidden}
.asset-preview img{width:100%;height:100%;object-fit:cover;border-radius:12px}

.asset-info h3{font-size:1rem;font-weight:600;margin-bottom:0.5rem;color:#f0f9fa}
.asset-meta{font-size:0.75rem;color:rgba(240,249,250,0.6);margin-bottom:0.5rem}
.asset-tags{display:flex;flex-wrap:wrap;gap:0.25rem;margin-bottom:1rem}

.tag{padding:0.25rem 0.5rem;background:rgba(51,153,153,0.2);border:1px solid rgba(51,153,153,0.3);border-radius:8px;font-size:0.625rem;color:#4ABAB8}

.asset-actions{display:flex;gap:0.5rem}
.action-btn{padding:0.5rem 1rem;background:rgba(51,153,153,0.2);border:1px solid rgba(51,153,153,0.3);border-radius:8px;color:#f0f9fa;cursor:pointer;transition:all 0.3s;font-size:0.75rem}
.action-btn:hover{background:rgba(51,153,153,0.4);border-color:#339999;transform:translateY(-2px)}
.action-btn.primary{background:linear-gradient(135deg,#339999,#2C8B8B);border-color:#339999}

/* AI Analysis Panel */
.ai-panel{background:rgba(26,74,82,0.6);backdrop-filter:blur(20px);border:1px solid rgba(74,171,184,0.2);border-radius:16px;padding:2rem;margin-bottom:2rem}

.ai-title{font-size:1.5rem;font-weight:700;margin-bottom:1rem;color:#4ABAB8;display:flex;align-items:center;gap:0.75rem}
.ai-icon{font-size:1.5rem}

.ai-suggestions{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1.5rem}

.suggestion-card{background:rgba(51,153,153,0.1);border:1px solid rgba(51,153,153,0.2);border-radius:12px;padding:1rem;transition:all 0.3s;cursor:pointer}
.suggestion-card:hover{background:rgba(51,153,153,0.2);border-color:#339999;transform:translateY(-2px)}

.suggestion-title{font-size:0.875rem;font-weight:600;margin-bottom:0.5rem;color:#f0f9fa}
.suggestion-desc{font-size:0.75rem;color:rgba(240,249,250,0.7);margin-bottom:0.5rem}
.suggestion-confidence{font-size:0.625rem;color:#4ABAB8}

/* Processing Status */
.processing-status{background:rgba(255,107,53,0.1);border:1px solid rgba(255,107,53,0.3);border-radius:12px;padding:1rem;margin-bottom:1rem;display:none}
.processing-status.active{display:block}

.status-title{font-size:1rem;font-weight:600;margin-bottom:0.5rem;color:#FF6B35}
.status-progress{width:100%;height:8px;background:rgba(255,107,53,0.2);border-radius:4px;overflow:hidden;margin-bottom:0.5rem}
.status-bar{height:100%;background:linear-gradient(90deg,#FF6B35,#E85D00);border-radius:4px;transition:width 0.3s;width:0%}
.status-text{font-size:0.875rem;color:rgba(240,249,250,0.8)}

/* Stats Grid */
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}

.stat-card{background:rgba(51,153,153,0.1);border:1px solid rgba(51,153,153,0.2);border-radius:12px;padding:1.5rem;text-align:center;transition:all 0.3s}
.stat-card:hover{background:rgba(51,153,153,0.2);border-color:#339999;transform:translateY(-2px)}

.stat-number{font-size:2rem;font-weight:700;color:#4ABAB8;margin-bottom:0.5rem}
.stat-label{font-size:0.875rem;color:rgba(240,249,250,0.7)}

/* Mobile Responsive */
@media(max-width:768px){
.main-container{grid-template-columns:1fr;gap:1rem;padding:1rem}
.sidebar{position:static;margin-bottom:1rem}
.asset-grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1rem}
}
</style>
</head>
<body>

<!-- Header -->
<header class="header">
<div class="logo">M</div>
<h1 class="title">Content Manager</h1>
<p class="subtitle">AI-powered asset optimization and organization</p>
</header>

<!-- Main Container -->
<div class="main-container">
<!-- Sidebar -->
<nav class="sidebar">
<div class="sidebar-section">
<h3 class="sidebar-title">üìÅ Categories</h3>
<div class="sidebar-item active" data-category="all">
<span>üìä</span>
<span>All Assets</span>
<span class="count" id="count-all">0</span>
</div>
<div class="sidebar-item" data-category="hero">
<span>üéØ</span>
<span>Hero Images</span>
<span class="count" id="count-hero">0</span>
</div>
<div class="sidebar-item" data-category="gallery">
<span>üñºÔ∏è</span>
<span>Gallery</span>
<span class="count" id="count-gallery">0</span>
</div>
<div class="sidebar-item" data-category="team">
<span>üë•</span>
<span>Team Photos</span>
<span class="count" id="count-team">0</span>
</div>
<div class="sidebar-item" data-category="athletes">
<span>üèÉ</span>
<span>Athletes</span>
<span class="count" id="count-athletes">0</span>
</div>
<div class="sidebar-item" data-category="events">
<span>üéâ</span>
<span>Events</span>
<span class="count" id="count-events">0</span>
</div>
</div>

<div class="sidebar-section">
<h3 class="sidebar-title">üîß Tools</h3>
<div class="sidebar-item" onclick="openOptimizer()">
<span>üé®</span>
<span>Batch Optimizer</span>
</div>
<div class="sidebar-item" onclick="openAIAnalyzer()">
<span>ü§ñ</span>
<span>AI Analyzer</span>
</div>
<div class="sidebar-item" onclick="openMetadataEditor()">
<span>üìù</span>
<span>Metadata Editor</span>
</div>
<div class="sidebar-item" onclick="openExportTool()">
<span>üì§</span>
<span>Export Tool</span>
</div>
</div>

<div class="sidebar-section">
<h3 class="sidebar-title">üìä Stats</h3>
<div class="stat-card">
<div class="stat-number" id="total-assets">0</div>
<div class="stat-label">Total Assets</div>
</div>
<div class="stat-card">
<div class="stat-number" id="optimized-assets">0</div>
<div class="stat-label">Optimized</div>
</div>
<div class="stat-card">
<div class="stat-number" id="storage-used">0MB</div>
<div class="stat-label">Storage Used</div>
</div>
</div>
</nav>

<!-- Content Area -->
<main class="content-area">
<!-- Upload Zone -->
<div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
<div class="upload-icon">üìÅ</div>
<div class="upload-text">Drop files here or click to upload</div>
<div class="upload-subtext">Supports images, videos, and documents</div>
<input type="file" id="fileInput" multiple accept="image/*,video/*,.pdf,.doc,.docx" style="display:none">
</div>

<!-- Processing Status -->
<div class="processing-status" id="processingStatus">
<div class="status-title">Processing Assets...</div>
<div class="status-progress">
<div class="status-bar" id="progressBar"></div>
</div>
<div class="status-text" id="statusText">Initializing...</div>
</div>

<!-- AI Analysis Panel -->
<div class="ai-panel" id="aiPanel" style="display:none">
<div class="ai-title">
<span class="ai-icon">ü§ñ</span>
<span>AI Analysis Results</span>
</div>
<div class="ai-suggestions" id="aiSuggestions">
<!-- AI suggestions will be populated here -->
</div>
</div>

<!-- Stats Grid -->
<div class="stats-grid">
<div class="stat-card">
<div class="stat-number" id="images-count">0</div>
<div class="stat-label">Images</div>
</div>
<div class="stat-card">
<div class="stat-number" id="videos-count">0</div>
<div class="stat-label">Videos</div>
</div>
<div class="stat-card">
<div class="stat-number" id="documents-count">0</div>
<div class="stat-label">Documents</div>
</div>
<div class="stat-card">
<div class="stat-number" id="ai-processed">0</div>
<div class="stat-label">AI Processed</div>
</div>
</div>

<!-- Asset Grid -->
<div class="asset-grid" id="assetGrid">
<!-- Assets will be populated here -->
</div>
</main>
</div>

<script>
// Content Manager Class
class MeauxbilityContentManager {
    constructor() {
        this.assets = [];
        this.currentCategory = 'all';
        this.uploadZone = document.getElementById('uploadZone');
        this.fileInput = document.getElementById('fileInput');
        this.assetGrid = document.getElementById('assetGrid');
        this.processingStatus = document.getElementById('processingStatus');
        this.aiPanel = document.getElementById('aiPanel');
        
        this.init();
    }

    init() {
        this.setupEventListeners();
        this.loadAssets();
        this.updateStats();
    }

    setupEventListeners() {
        // File upload
        this.fileInput.addEventListener('change', (e) => this.handleFileUpload(e));
        
        // Drag and drop
        this.uploadZone.addEventListener('dragover', (e) => this.handleDragOver(e));
        this.uploadZone.addEventListener('dragleave', (e) => this.handleDragLeave(e));
        this.uploadZone.addEventListener('drop', (e) => this.handleDrop(e));
        
        // Category filtering
        document.querySelectorAll('.sidebar-item[data-category]').forEach(item => {
            item.addEventListener('click', (e) => this.filterByCategory(e.target.dataset.category));
        });
    }

    async loadAssets() {
        try {
            // Simulate loading assets from GCP
            this.assets = await this.fetchAssetsFromGCP();
            this.renderAssets();
            this.updateStats();
        } catch (error) {
            console.error('Failed to load assets:', error);
        }
    }

    async fetchAssetsFromGCP() {
        // Mock data for demonstration
        return [
            {
                id: 1,
                name: 'hero-image-1.jpg',
                category: 'hero',
                type: 'image',
                size: '2.5MB',
                url: 'https://via.placeholder.com/400x300/4ABAB8/ffffff?text=Hero+Image',
                optimized: true,
                aiLabels: ['person', 'sport', 'wheelchair'],
                uploadDate: '2024-01-15'
            },
            {
                id: 2,
                name: 'team-photo-1.jpg',
                category: 'team',
                type: 'image',
                size: '3.2MB',
                url: 'https://via.placeholder.com/400x300/339999/ffffff?text=Team+Photo',
                optimized: false,
                aiLabels: ['group', 'people', 'smiling'],
                uploadDate: '2024-01-14'
            },
            {
                id: 3,
                name: 'athlete-training.mp4',
                category: 'athletes',
                type: 'video',
                size: '15.8MB',
                url: 'https://via.placeholder.com/400x300/FF6B35/ffffff?text=Training+Video',
                optimized: true,
                aiLabels: ['sport', 'training', 'wheelchair'],
                uploadDate: '2024-01-13'
            }
        ];
    }

    handleFileUpload(event) {
        const files = Array.from(event.target.files);
        this.processFiles(files);
    }

    handleDragOver(event) {
        event.preventDefault();
        this.uploadZone.classList.add('dragover');
    }

    handleDragLeave(event) {
        event.preventDefault();
        this.uploadZone.classList.remove('dragover');
    }

    handleDrop(event) {
        event.preventDefault();
        this.uploadZone.classList.remove('dragover');
        const files = Array.from(event.dataTransfer.files);
        this.processFiles(files);
    }

    async processFiles(files) {
        this.showProcessingStatus();
        
        for (let i = 0; i < files.length; i++) {
            const file = files[i];
            this.updateProgress((i / files.length) * 100, `Processing ${file.name}...`);
            
            try {
                // Upload to GCP
                const uploadedAsset = await this.uploadToGCP(file);
                
                // AI Analysis
                const aiAnalysis = await this.analyzeWithAI(file);
                
                // Add to assets
                this.assets.push({
                    ...uploadedAsset,
                    aiLabels: aiAnalysis.labels,
                    category: aiAnalysis.suggestedCategory
                });
                
            } catch (error) {
                console.error(`Failed to process ${file.name}:`, error);
            }
        }
        
        this.hideProcessingStatus();
        this.renderAssets();
        this.updateStats();
    }

    async uploadToGCP(file) {
        // Mock upload to GCP
        return {
            id: Date.now(),
            name: file.name,
            type: file.type.startsWith('image/') ? 'image' : 'video',
            size: this.formatFileSize(file.size),
            url: URL.createObjectURL(file),
            uploadDate: new Date().toISOString().split('T')[0]
        };
    }

    async analyzeWithAI(file) {
        // Mock AI analysis
        const mockLabels = ['person', 'sport', 'wheelchair', 'training', 'team', 'event'];
        const randomLabels = mockLabels.sort(() => 0.5 - Math.random()).slice(0, 3);
        
        return {
            labels: randomLabels,
            suggestedCategory: this.suggestCategory(randomLabels),
            confidence: Math.random() * 0.5 + 0.5
        };
    }

    suggestCategory(labels) {
        if (labels.includes('person') && labels.includes('sport')) return 'athletes';
        if (labels.includes('person') && labels.includes('team')) return 'team';
        if (labels.includes('event')) return 'events';
        return 'gallery';
    }

    renderAssets() {
        const filteredAssets = this.currentCategory === 'all' 
            ? this.assets 
            : this.assets.filter(asset => asset.category === this.currentCategory);
        
        this.assetGrid.innerHTML = filteredAssets.map(asset => this.createAssetCard(asset)).join('');
    }

    createAssetCard(asset) {
        return `
            <div class="asset-card" data-asset-id="${asset.id}">
                <div class="asset-preview">
                    ${asset.type === 'image' 
                        ? `<img src="${asset.url}" alt="${asset.name}" loading="lazy">`
                        : `<div>üé•</div>`
                    }
                </div>
                <div class="asset-info">
                    <h3>${asset.name}</h3>
                    <div class="asset-meta">
                        ${asset.size} ‚Ä¢ ${asset.uploadDate}
                        ${asset.optimized ? ' ‚Ä¢ ‚úÖ Optimized' : ' ‚Ä¢ ‚ö†Ô∏è Needs Optimization'}
                    </div>
                    <div class="asset-tags">
                        ${asset.aiLabels.map(label => `<span class="tag">${label}</span>`).join('')}
                    </div>
                    <div class="asset-actions">
                        <button class="action-btn" onclick="optimizeAsset(${asset.id})">üé® Optimize</button>
                        <button class="action-btn" onclick="editAsset(${asset.id})">‚úèÔ∏è Edit</button>
                        <button class="action-btn primary" onclick="downloadAsset(${asset.id})">üì• Download</button>
                    </div>
                </div>
            </div>
        `;
    }

    filterByCategory(category) {
        this.currentCategory = category;
        
        // Update sidebar
        document.querySelectorAll('.sidebar-item[data-category]').forEach(item => {
            item.classList.toggle('active', item.dataset.category === category);
        });
        
        this.renderAssets();
    }

    updateStats() {
        const totalAssets = this.assets.length;
        const optimizedAssets = this.assets.filter(asset => asset.optimized).length;
        const images = this.assets.filter(asset => asset.type === 'image').length;
        const videos = this.assets.filter(asset => asset.type === 'video').length;
        const documents = this.assets.filter(asset => asset.type === 'document').length;
        
        // Update counts
        document.getElementById('total-assets').textContent = totalAssets;
        document.getElementById('optimized-assets').textContent = optimizedAssets;
        document.getElementById('images-count').textContent = images;
        document.getElementById('videos-count').textContent = videos;
        document.getElementById('documents-count').textContent = documents;
        
        // Update category counts
        const categories = ['all', 'hero', 'gallery', 'team', 'athletes', 'events'];
        categories.forEach(category => {
            const count = category === 'all' 
                ? totalAssets 
                : this.assets.filter(asset => asset.category === category).length;
            document.getElementById(`count-${category}`).textContent = count;
        });
    }

    showProcessingStatus() {
        this.processingStatus.classList.add('active');
    }

    hideProcessingStatus() {
        this.processingStatus.classList.remove('active');
    }

    updateProgress(percent, text) {
        document.getElementById('progressBar').style.width = `${percent}%`;
        document.getElementById('statusText').textContent = text;
    }

    formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
}

// Global functions for asset actions
function optimizeAsset(assetId) {
    console.log('Optimizing asset:', assetId);
    // Implement optimization logic
}

function editAsset(assetId) {
    console.log('Editing asset:', assetId);
    // Implement edit logic
}

function downloadAsset(assetId) {
    console.log('Downloading asset:', assetId);
    // Implement download logic
}

function openOptimizer() {
    console.log('Opening batch optimizer');
    // Implement batch optimizer
}

function openAIAnalyzer() {
    console.log('Opening AI analyzer');
    // Implement AI analyzer
}

function openMetadataEditor() {
    console.log('Opening metadata editor');
    // Implement metadata editor
}

function openExportTool() {
    console.log('Opening export tool');
    // Implement export tool
}

// Initialize content manager
document.addEventListener('DOMContentLoaded', () => {
    new MeauxbilityContentManager();
});
</script>

</body>
</html>
